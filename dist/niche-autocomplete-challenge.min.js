/*! niche-autocomplete-challenge 09-09-2015 */
require(["","",""],function(a,b){"use strict";a(function(){a(".input-search").val(""),a(".form-search").submit(function(a){a.preventDefault()}),a(document).on("blur",".form-search",function(b){a(event.relatedTarget).parent("li").length||a.publish("search:exitResults")}),a(".input-search").keydown(function(a){return a.keyCode===b.keyCodes.UP?!1:!0}),a(".list-results").on("mouseenter","li",function(){a.publish("search:navigateResult",{index:a(this).index()})}).on("mouseleave","li",function(){a(".input-search").val(""),a(".list-results .result-active").removeClass("result-active")}),a(".input-search").on("keyup",function(c){return c.keyCode===b.keyCodes.ESCAPE?(a.publish("search:exitResults"),!1):c.keyCode===b.keyCodes.ENTER&&a(".list-results .result-active").length?(a.publish("search:selectResult",{index:a(".list-results .result-active").index()}),!1):c.keyCode===b.keyCodes.DOWN?(a(".list-results .result-active").next("li").length?a.publish("search:navigateResult",{index:a(".list-results .result-active").index()+1}):a.publish("search:navigateResult",{index:0}),!1):c.keyCode===b.keyCodes.UP?(a(".list-results .result-active").prev("li").length?a.publish("search:navigateResult",{index:a(".list-results .result-active").index()-1}):a.publish("search:navigateResult",{index:-1}),!1):(SearchWidget.fetch(a(this).val().trim()),!1)})})}),function(a){"use strict";var b=function(b){var c=b.index||0,d=a(".list-results li").eq(c).data("name");a(".input-search").val(d)};a.subscribe("search:selectResult",function(a,c){b(c)}),a.subscribe("search:navigateResult",function(a,c){b(c)}),a.subscribe("search:exitResults",function(b,c){a(".input-search").val("")})}(jQuery),function(a){"use strict";a.subscribe("theme:activate",function(b,c){var d="theme-"+c.theme||"theme-0";a(".container-autocomplete").removeClass("theme-0 theme-1").addClass(d)}),a.subscribe("search:jsonLoadError",function(b,c){a(".error-search").text(c.message).removeClass("hidden")}),a.subscribe("search:jsonLoadSuccess",function(b,c){a(".error-search").addClass("hidden");var d="";a.each(c.results,function(a,b){d+=tmpl("tmpl_searchResult",b)}),a(".list-results").html(d),1===c.total&&a(".list-results li").first().addClass("result-active")}),a.subscribe("search:exitResults",function(b,c){a(".list-results").empty()}),a.subscribe("search:navigateResult",function(b,c){a(".list-results .result-active").removeClass("result-active");var d=c.index||0;a(".list-results li").eq(d).addClass("result-active")}),a.subscribe("search:selectResult",function(b,c){var d=c.index||0;a(".list-results li").eq(d).addClass("selected").children("a")[0].click()})}(jQuery),function(a,b){"use strict";function c(){}c.prototype.fetch=function(c){c.length||a.publish("search:exitResults");var d=b.getSearchUrlForTerm(c);JSONPUtil.LoadJSONP(d,function(c){return c?void a.publish("search:jsonLoadSuccess",c):void a.publish("search:jsonLoadError",{message:b.SEARCH_ERROR_MSG_DEFAULT})})},window.SearchWidget=window.SearchWidget||new c}(jQuery,Constants),function(a){"use strict";a(function(){a(".container-themes").delegate("li","click",function(b){b.preventDefault();var c=a(this).data("theme");a.publish("theme:activate",{theme:c})})})}(jQuery),function(a){"use strict";a(function(){a.subscribe("theme:activate",function(b,c){var d=c.theme||0;a(".container-themes .theme-active").removeClass("theme-active"),a(".container-themes li").eq(d).addClass("theme-active")})})}(jQuery);